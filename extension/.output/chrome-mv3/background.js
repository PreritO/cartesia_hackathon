var background=(function(){"use strict";function a(o){return o==null||typeof o=="function"?{main:o}:o}const c=a(()=>{console.log("[AI Commentator] Service worker started"),chrome.action.onClicked.addListener(o=>{o.windowId&&chrome.sidePanel.open({windowId:o.windowId})}),chrome.runtime.onMessage.addListener((o,d,t)=>{if(o.type==="GET_STREAM_ID"){const i=o.tabId;return console.log("[AI Commentator] GET_STREAM_ID for tab:",i),chrome.tabCapture.getMediaStreamId({targetTabId:i}).then(r=>{console.log("[AI Commentator] Got stream ID:",r?.slice(0,20)),t({streamId:r})}).catch(r=>{console.error("[AI Commentator] tabCapture error:",r),t({error:String(r)})}),!0}})});function l(){}globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function e(o,...d){}const s={debug:(...o)=>e(console.debug,...o),log:(...o)=>e(console.log,...o),warn:(...o)=>e(console.warn,...o),error:(...o)=>e(console.error,...o)};let n;try{n=c.main(),n instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(o){throw s.error("The background crashed on startup!"),o}var u=n;return u})();
