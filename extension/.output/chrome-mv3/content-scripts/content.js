var content=(function(){"use strict";function w(r){return r}function u(){return document.querySelector("video")}const h={matches:["*://*.youtube.com/*"],runAt:"document_idle",main(){console.log("[AI Commentator] Content script loaded on YouTube page"),chrome.runtime.onMessage.addListener((r,e,t)=>{const n=u();if(!n){t({ok:!1,error:"No video element found"});return}switch(r.type){case"VIDEO_PLAY":n.play(),t({ok:!0});break;case"VIDEO_PAUSE":n.pause(),t({ok:!0});break;case"VIDEO_MUTE":n.muted=!0,t({ok:!0});break;case"VIDEO_UNMUTE":n.muted=!1,t({ok:!0});break;case"VIDEO_STATUS":t({ok:!0,paused:n.paused,muted:n.muted,currentTime:n.currentTime,duration:n.duration});break;default:t({ok:!1,error:"Unknown message type"})}})}};function o(r,...e){}const m={debug:(...r)=>o(console.debug,...r),log:(...r)=>o(console.log,...r),warn:(...r)=>o(console.warn,...r),error:(...r)=>o(console.error,...r)},l=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;var g=class d extends Event{static EVENT_NAME=a("wxt:locationchange");constructor(e,t){super(d.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=t}};function a(r){return`${l?.runtime?.id}:content:${r}`}function v(r){let e,t;return{run(){e==null&&(t=new URL(location.href),e=r.setInterval(()=>{let n=new URL(location.href);n.href!==t.href&&(window.dispatchEvent(new g(n,t)),t=n)},1e3))}}}var E=class c{static SCRIPT_STARTED_MESSAGE_TYPE=a("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=v(this);receivedMessageIds=new Set;constructor(e,t){this.contentScriptName=e,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return l.runtime?.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,t){const n=setInterval(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(e,t){const n=setTimeout(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(e){const t=requestAnimationFrame((...n)=>{this.isValid&&e(...n)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(e,t){const n=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},t);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(e,t,n,i){t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(t.startsWith("wxt:")?a(t):t,n,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),m.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:c.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const t=e.data?.type===c.SCRIPT_STARTED_MESSAGE_TYPE,n=e.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(e.data?.messageId);return t&&n&&i}listenForNewerScripts(e){let t=!0;const n=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const S=t;if(t=!1,S&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}};function b(){}function s(r,...e){}const f={debug:(...r)=>s(console.debug,...r),log:(...r)=>s(console.log,...r),warn:(...r)=>s(console.warn,...r),error:(...r)=>s(console.error,...r)};return(async()=>{try{const{main:r,...e}=h;return await r(new E("content",e))}catch(r){throw f.error('The content script "content" crashed on startup!',r),r}})()})();
content;